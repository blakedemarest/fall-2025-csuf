226

Chapter 7: User-Defined Functions and Function Files

7.2.3 The H1 Line and Help Text Lines

The H1 line and help text lines are comment lines (lines that begin with the per-
cent, %, sign) following the function definition line. They are optional but are
frequently used to provide information  about the function. The H1 line is the
first comment line and usually contains the name and a short definition of the
function.  When  a  user  types  (in  the  Command  Window)  lookfor  a_word,
MATLAB  searches  for  a_word  in  the  H1  lines  of  all  the  functions,  and  if  a
match is found, the H1 line that contains the match is displayed.

 The help text lines are comment lines that follow the H1 line. These lines
contain an explanation of the function and any instructions related to the input
and output arguments. The comment lines that are typed between the function
definition line and the first non-comment line (the H1 line and the help text) are
displayed when the user types help function_name in the Command Win-
dow.  This  is  true  for  MATLAB  built-in  functions  as  well  as  the  user-defined
functions. For example, for the function loan in Figure 7-2, if help  loan is
typed in the Command Window (make sure the current directory or the search
path includes the directory where the file is saved), the display on the screen is:

>> help loan

loan calculates monthly and total payment of loan.

Input arguments:

amount=loan amount in $.

rate=annual interest rate in percent.

years=number of years.

Output arguments:

mpay=monthly payment, tpay=total payment.

A function file can include additional comment lines in the function body. These
lines are ignored by the help command.

7.2.4 Function Body

The  function  body  contains  the  computer  program  (code)  that  actually  per-
forms the computations. The code can use all MATLAB programming features.
This includes calculations, assignments, any built-in or user-defined functions,
flow control (conditional statements and loops) as explained in Chapter 6, com-
ments, blank lines, and interactive input and output.

7.3 LOCAL AND GLOBAL VARIABLES

All the variables in a function file are local (the input and output arguments and
any variables that are assigned values within the function file). This means that
the  variables  are  defined  and  recognized  only  inside  the  function  file.  When  a

7.4 Saving a Function File

227

function  file  is  executed,  MATLAB  uses  an  area  of  memory  that  is  separate
from the workspace (the memory space of the Command Window and the script
files).  In  a  function  file  the  input  variables  are  assigned  values  each  time  the
function is called. These variables are then used in the calculations within the
function file. When the function file finishes its execution, the values of the out-
put arguments are transferred to the variables that were used when the function
was called. All this means that a function file can have variables with the same
names as variables in the Command Window or in script files. The function file
does not recognize variables with the same names as have been assigned values
outside the function. The assignment of values to these variables in the function
file will not change their assignment elsewhere.

Each  function  file  has  its  own  local  variables,  which  are  not  shared  with
other functions or with the workspace of the Command Window and the script
files. It is possible, however, to make a variable common (recognized) in several
different  function  files,  and  perhaps  in  the  workspace  too.  This  is  done  by
declaring the variable global with the global command, which has the form:

global variable_name

Several variables can be declared global by listing them, separated with spaces,
in the global command. For example:

global GRAVITY_CONST FrictionCoefficient

• The variable has to be declared global in every function file that the user wants it

to be recognized in. The variable is then common only to these files.

• The  global  command  must  appear  before  the  variable  is  used.  It  is  recom-

mended to enter the global command at the top of the file.

• The  global  command  has  to  be  entered  in  the  Command  Window,  or  in  a

script file, for the variable to be recognized in the workspace.

• The variable can be assigned, or reassigned, a value in any of the locations in

which it is declared common.

• The  use  of  long  descriptive  names  (or  all  capital  letters)  is  recommended  for

global variables in order to distinguish them from regular variables.

7.4 SAVING A FUNCTION FILE

A function file must be saved before it can be used. This is done, as with a script
file, by choosing Save as . . . from the File menu, selecting a location (many stu-
dents save to a flash drive), and entering the file name. It is highly recommended
that the file be saved with a name that is identical to the function name in the
function  definition  line.  In  this  way  the  function  is  called  (used)  by  using  the
function name. (If a function file is saved with a different name, the name it is
saved under must be used when the function is called.) Function files are saved

