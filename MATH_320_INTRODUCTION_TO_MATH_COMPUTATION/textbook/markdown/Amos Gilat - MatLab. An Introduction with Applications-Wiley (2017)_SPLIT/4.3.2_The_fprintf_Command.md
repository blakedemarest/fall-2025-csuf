4.3 Output Commands

103

        1986        130

        1988        136

        1990        145

        1992        158

        1994        178

        1996        211

The tableYP array is displayed.

Another  example  of  displaying  a  table  is  shown  in  Sample  Problem  4-3.
Tables can also be created and displayed with the fprintf command, which is
explained in the next section.

4.3.2 The fprintf Command

The fprintf command can be used to display output (text and data) on the
screen  or  to  save  it  to  a  file.  With  this  command  (unlike  with  the  disp  com-
mand) the output can be formatted. For example, text and numerical values of
variables can be intermixed and displayed in the same line. In addition, the for-
mat of the numbers can be controlled.

With many available options, the fprintf command can be long and com-
plicated.  To  avoid  confusion,  the  command  is  presented  gradually.  First,  this
section shows how to use the command to display text messages, then how to
mix numerical data and text, next how to format the display of numbers, and
finally how to save the output to a file.

Using the fprintf command to display text:

To display text, the fprintf command has the form:

fprintf(‘text typed in as a string’)

For example:

fprintf('The  problem,  as  entered,  has  no  solution.  Please
check the input data.')

If this line is part of a script file, then when the line is executed, the following is
displayed in the Command Window:

The problem, as entered, has no solution. Please check the input data.

With the fprintf command it is possible to start a new line in the middle of
the string. This is done by inserting \n before the character that will start the
new line. For example, inserting \n after the first sentence in the previous exam-
ple gives:

104

Chapter 4: Using Script Files and Managing Data

fprintf('The  problem,  as  entered,  has  no  solution.\nPlease
check the input data.')

When this line executes, the display in the Command Window is:

The problem, as entered, has no solution.
Please check the input data.

The  \n  is  called  an  escape  character.  It  is  used  to  control  the  display.  Other
escape characters that can be inserted within the string are:

\b
\t

Backspace.
Horizontal tab.

When a program has more than one fprintf command, the display gener-
ated is continuous (the fprintf command does not automatically start a new
line). This is true even if there are other commands between the fprintf com-
mands. An example is the following script file:

fprintf('The  problem,  as  entered,  has  no  solution.  Please
check the input data.')

x = 6; d = 19 + 5*x;

fprintf('Try to run the program later.')

y = d + x;

fprintf('Use different input values.')

When this file is executed the display in the Command Window is:

The problem, as entered, has no solution. Please check the
input data.Try to run the program later.Use different input
values.

To start a new line with the fprintf command, \n must be typed at the start
of the string.

Using the fprintf command to display a mix of text and numerical data:

To display a mix of text and a number (value of a variable), the fprintf com-
mand has the form:

fprintf(‘text as string %-5.2f additional text’,
                                    variable_name)

The % sign marks the spot
where the number is
inserted within the text.

Formatting elements
(define the format of
the number).

The name of the
variable whose
value is displayed.

4.3 Output Commands

The formatting elements are:

105

Flag
(optional)

–5.2f

Field width
and precision
(optional)

Conversion character
(required)

The flag, which is optional, can be one of the following three characters:

Character used
for flag
– (minus sign)
+ (plus sign)
0 (zero)

Description

Left-justifies the number within the field.
Prints a sign character (+ or –) in front of the number.
Adds zeros if the number is shorter than the field.

The  field  width  and  precision  (5.2  in  the  previous  example)  are  optional.
The first number (5 in the example) is the field width, which specifies the mini-
mum number  of digits in the display. If the number  to be displayed is shorter
than the field width, spaces or zeros are added in front of the number. The preci-
sion is the second number (2 in the example). It specifies the number of digits to
be displayed to the right of the decimal point.

The last element in the formatting elements, which is required, is the conver-
sion  character,  which  specifies  the  notation  in  which  the  number  is  displayed.
Some of the common notations are:

e
E
f
g
G
 i

Exponential notation using lowercase e (e.g., 1.709098e+001).
Exponential notation using uppercase E (e.g., 1.709098E+001).
Fixed-point notation (e.g., 17.090980).
The shorter of e or f notations.
The shorter of E or f notations.
Integer.

Information  about  additional  notation  is  available  in  the  help  menu  of  MAT-
LAB. As an example, the fprintf command with a mix of text and a number
is used in the script file that calculates the average points scored in three games.

% This script file calculates the average points scored in three games.

% The values are assigned to the variables by using the input command.

% The fprintf command is used to display the output.

game(1) = input('Enter the points scored in the first game    ');

game(2) = input('Enter the points scored in the second game   ');

game(3) = input('Enter the points scored in the third game    ');

ave_points = mean(game);

106

Chapter 4: Using Script Files and Managing Data

fprintf('An average of %f points was scored in the three games.',ave_points)

Text

% marks the
position of
the number.

Additional
text.

The name of the
variable whose
value is displayed.

Notice that, besides using the fprintf command, this file differs from the ones
shown earlier in the chapter in that the scores are stored in the first three ele-
ments of a vector named game, and the average of the scores is calculated by
using  the  mean  function.  The  Command  Window  where  the  script  file  above
(saved as Chapter4Example6) was run is shown below.

>> Chapter4Example6

Enter the points scored in the first game    75

Enter the points scored in the second game   60

Enter the points scored in the third game    81

An average of 72.000000 points was scored in the three games.
>>

The display generated by the fprintf command
combines text and a number (value of a variable).

With the fprintf command it is possible to insert more than one number
(value of a variable) within the text. This is done by typing %g (or % followed by
any formatting elements) at the places in the text where the numbers are to be
inserted.  Then,  after  the  string  argument  of  the  command  (following  the
comma),  the  names  of  the  variables  are  typed  in  the  order  in  which  they  are
inserted in the text. In general the command looks like:

fprintf(‘..text...%g...%g...%f...’,variable1,variable2,variable3)

An example is shown in the following script file:

% This program calculates the distance a projectile flies,

% given its initial velocity and the angle at which it is shot.

% the fprintf command is used to display a mix of text and num-
bers.

v=1584;  % Initial velocity (km/h)

theta=30;  % Angle (degrees)

vms=v*1000/3600;

t=vms*sind(30)/9.81;

d=vms*cosd(30)*2*t/1000;

Changing velocity units to m/s.

Calculating the time to highest point.

Calculating max distance.

4.3 Output Commands

107

fprintf('A projectile shot at %3.2f degrees with a velocity
of %4.2f km/h will travel a distance of %g km.\n',theta,v,d)

When this script file (saved as Chapter4Example7) is executed, the display in the
Command Window is:

>> Chapter4Example7

A  projectile  shot  at  30.00  degrees  with  a  velocity  of
1584.00 km/h will travel a distance of 17.091 km.
>>

Additional remarks about the fprintf command:

• To place a single quotation mark in the displayed text, type two single quotation

marks in the string inside the command.

• To display the % character in the text, type %%.

• The fprintf command is vectorized. This means that when a variable that is a
vector or a matrix is included in the command, the command repeats itself until
all the elements are displayed. If the variable is a matrix, the data is used column
by column.

For example, the script file below creates a

 matrix T in which the first
row  contains  the  numbers  1  through  5,  and  the  second  row  shows  the  corre-
sponding square roots.

x=1:5;

y=sqrt(x);

T=[x; y]

Create

 matrix T, first row is x, second row is y.

Create a vector x.
Create a vector y.

fprintf('If the number is: %i, its square root is: %f\n',T)

The fprintf command displays two numbers from T in every line.

When this script file is executed, the display in the Command Window is:

T =
    1.0000    2.0000    3.0000    4.0000    5.0000
    1.0000    1.4142    1.7321    2.0000    2.2361

If the number is: 1, its square root is: 1.000000

If the number is: 2, its square root is: 1.414214

If the number is: 3, its square root is: 1.732051

If the number is: 4, its square root is: 2.000000

If the number is: 5, its square root is: 2.236068

The

 matrix T.

The fprintf
command repeats
five times, using the
numbers from the
matrix T column
after column.

108

Chapter 4: Using Script Files and Managing Data

Using the fprintf command to save output to a file:

In addition to displaying output in the Command Window, the fprintf com-
mand can be used for writing the output to a file when it is necessary to save the
output. The data that is saved can subsequently be displayed or used in MAT-
LAB and in other applications.

Writing output to a file requires three steps:

a) Opening a file using the fopen command.
b) Writing the output to the open file using the fprintf command.
c) Closing the file using the fclose command.

Step a:

Before data can be written to a file, the file must be opened. This is done with
the  fopen  command,  which  creates  a  new  file  or  opens  an  existing  file.  The
fopen command has the form:

fid = fopen(‘file_name’,‘permission’)

fid is a variable called the file identifier. A scalar value is assigned to fid when
fopen is executed. The file name is written (including its extension) within sin-
gle quotes as a string. The permission is a code (also written as a string) that
tells how the file is opened. Some of the more common permission codes are:

‘r’
‘w’

‘a’

‘r+’
‘w+’

‘a+’

Open file for reading (default).
Open  file  for  writing.  If  the  file  already  exists,  its

content is deleted. If the file does not exist, a new file is created.

Same as ‘w’, except that if the file exists the written

data is appended to the end of the file.

Open (do not create) file for reading and writing.
Open file for reading and writing. If the file already
exists, its content is deleted. If the file does not exist, a new file is
created.

Same as ‘w+’, except that if the file exists the writ-

ten data is appended to the end of the file.

If a permission code is not included in the command, the file opens with the
default code ‘r’. Additional permission codes are described in the help menu.

Step b:

Once the file is open, the fprintf command can be used to write output to the
file. The fprintf command is used in exactly the same way as it is used to dis-
play output in the Command Window, except that the variable fid is inserted
inside the command. The fprintf command then has the form:

fprintf(fid,‘text %-5.2f additional text’,vari
                                        able_name)

fid is added to the fprintf command.

4.3 Output Commands

Step c:

109

When  the  writing  of  data  to  the  file  is  complete,  the  file  is  closed  using  the
fclose command. The fclose command has the form:

fclose(fid)

Additional notes on using the fprintf command for saving output to a file:

• The created file is saved in the current directory.

•

It is possible to use the fprintf command to write to several different files.
This  is  done  by  first  opening  the  files,  assigning  a  different  fid  to  each  (e.g.
fid1,  fid2,  fid3,  etc.),  and  then  using  the  fid  of  a  specific  file  in  the
fprintf command to write to that file.

An example of using fprintf commands for saving output to two files is
shown in the following script file. The program in the file generates two unit con-
version tables. One table converts velocity units from miles per hour to kilome-
ters per hour, and the other table converts force units from pounds to newtons.
Each conversion table is saved to a different text file (extension .txt).

% Script file in which fprintf is used to write output to files.

% Two conversion tables are created and saved to two different files.

% One converts mi/h to km/h, the other converts lb to N.

clear all

Vmph=10:10:100;

Vkmh=Vmph.*1.609;

TBL1=[Vmph; Vkmh];

Flb=200:200:2000;

FN=Flb.*4.448;

TBL2=[Flb; FN];

Creating a vector of velocities in mi/h.

Converting mph to km/h.
Creating a table (matrix) with two rows.
Creating a vector of forces in lb.

Converting lb to N.
Creating a table (matrix) with two rows.

fid1=fopen('VmphtoVkm.txt','w');

Open a .txt file named VmphtoVkm.

fid2=fopen('FlbtoFN.txt','w');

Open a .txt file named FlbtoFN.

fprintf(fid1,'Velocity Conversion Table\n \n');

Writing a title and an empty line to the file fid1.

fprintf(fid1,'      mi/h           km/h    \n');

Writing two column headings to the file fid1.

fprintf(fid1,'   %8.2f       %8.2f\n',TBL1);

Writing the data from the variable TBL1 to the file fid1.

110

Chapter 4: Using Script Files and Managing Data

fprintf(fid2,'Force Conversion Table\n \n');
fprintf(fid2,'   Pounds     Newtons    \n');
fprintf(fid2,'   %8.2f       %8.2f\n',TBL2);

fclose(fid1);

fclose(fid2);

Writing the force
conversion table
(data in variable
TBL2) to the file
fid2.
Closing the files fid1 and fid2.

When the script file above is executed two new .txt files, named VmphtoVkm
and FlbtoFN, are created and saved in the current directory. These files can be
opened  with  any  application  that  can  read  .txt  files.  Figures  4-3  and  4-4  show
how the two files appear when they are opened with Microsoft Word.

Figure 4-3: The VmphtoVkm.txt file opened in Word.

Figure 4-4: The FlbtoFN.txt file opened in Word.

