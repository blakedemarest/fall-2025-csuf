6.3  The switch-case Statement

189

else

   rh=12.5+10.5*(h-19)/14;
   v=pi*12.5^2*19+pi*(h-19)*(12.5^2+12.5*rh+rh^2)/3;

   fprintf('The volume of the water is %7.3f cubic meter.\n',v)
end

The following is the display in the Command Window when the program is used
with three different values of water height.

Please enter the height of the float in meter  8
The volume of the water is 3926.991 cubic meter.

Please enter the height of the float in meter  25.7
The volume of the water is 14114.742 cubic meter.

Please enter the height of the float in meter  35
ERROR. The height cannot be larger than 33 m.

6.3 THE switch-case STATEMENT

The switch-case statement is another method that can be used to direct the
flow of a program. It provides a means for choosing one group of commands for
execution out of several possible groups. The structure of the statement is shown
in Figure 6-4.The first line is the switch command, which has the form:

switch  switch expression

The switch expression can be a scalar or a string. Usually it is a variable that has
an assigned scalar or a string. It can also be, however, a mathematical expression
that includes pre-assigned variables and can be evaluated.
• Following the switch command are one or several case commands. Each has
a value (can be a scalar or a string) next to it (value1, value2, etc.) and an associ-
ated group of commands below it.

• After the last case command there is an optional otherwise command fol-

lowed by a group of commands.

The last line must be an end statement.
How does the switch-case statement work?

The value of the switch expression in the switch command is compared with
the values that are next to each of the case statements. If a match is found, the
group  of  commands  that  follow  the  case  statement  with  the  match  are  exe-
cuted. (Only one group of commands—the one between the case that matches
and either the case, otherwise, or end statement that is next—is executed).
•

If there is more than one match, only the first matching case is executed.

190

Chapter 6: Programming in MATLAB

......
......

MATLAB program.

switch switch expression

case value1
........
........
case value2
........
........
case value3
........
........
otherwise
........
........

Group 1 of commands.

Group 2 of commands.

Group 3 of commands.

Group 4 of commands.

end
......
......

MATLAB program.

Figure 6-4: The structure of a switch-case statement.

•

•

If no match is found and the otherwise statement (which is optional) is pres-
ent, the group of commands between otherwise and end is executed.

If no match is found and the otherwise statement is not present, none of the
command groups is executed.

• A case statement can have more than one value. This is done by typing the val-
ues in the form: {value1, value2, value3, ...}. (This form, which is
not covered in this book, is called a cell array.) The case is executed if at least one
of the values matches the value of switch expression.

A Note: In MATLAB only the first matching case is executed. After the group of
commands associated with the first matching case are executed, the program skips
to  the  end  statement.  This  is  different  from  the  C  language,  where  break  state-
ments are required.

Sample Problem 6-4: Converting units of energy

Write a program in a script file that converts a quantity of energy (work) given
in units  of either  joule,  ft-lb, cal,  or eV to the  equivalent quantity in different
units specified by the user. The program asks the user to enter the quantity of
energy, its current units, and the desired new units. The output is the quantity of

6.3  The switch-case Statement

191

energy in the new units.

The  conversion  factors  are:  1

J

=

0.738

ft-lb

=

0.239

cal

eV.

Use the program to:
(a) Convert 150 J to ft-lb.
(b) Convert 2,800 cal to J.
(c) Convert 2.7 eV to cal.

Solution

The  program  includes  two  sets  of  switch-case  statements  and  one  if-
else-end statement. The first switch-case statement is used to convert the
input  quantity  from  its  initial  units  to  units  of  joules.  The  second  is  used  to
convert the quantity from joules to the specified new units. The if-else-end
statement is used to generate an error message if units are entered incorrectly.

Ein=input('Enter the value of the energy (work) to be converted: ');

EinUnits=input('Enter the current units (J, ft-lb, cal, or eV):  ','s');

EoutUnits=input('Enter the new units (J, ft-lb, cal, or eV):  ','s');

error=0;

switch EinUnits

case 'J'

    EJ=Ein;

case 'ft-lb'

    EJ=Ein/0.738;

case 'cal'

    EJ=Ein/0.239;

case 'eV'

    EJ=Ein/6.24e18;

otherwise

    error=1;

end

switch EoutUnits

case 'J'

    Eout=EJ;

case 'ft-lb'

    Eout=EJ*0.738;

case 'cal'

    Eout=EJ*0.239;

case 'eV'

    Eout=EJ*6.24e18;

Assign 0 to variable error.
First  switch  statement.  Switch  expres-
sion is a string with initial units.

Each  of  the  four  case  statements
has a value (string) that corresponds
to one of the initial units, and a com-
mand that converts Ein to units of J.
(Assign the value to EJ.)

Assign 1 to error if no match is found. Possi-
ble only if initial units were typed incorrectly.

Second  switch  statement.  Switch
expression is a string with new units.

Each  of  the  four  case  statements
has a value (string) that corresponds
to one of the new units, and a com-
mand  that  converts  EJ  to  the  new
units. (Assign the value to Eout.)

